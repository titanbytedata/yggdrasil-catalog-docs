{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"Yggdrasil Catalog Docs  Report a Bug   \u2699   Request a Feature   \u2699   Ask a Question"},{"location":"#about","title":"About","text":"&gt; **[?]** &gt; Provide general information about your project here. &gt; What problem does it (intend to) solve? &gt; What is the purpose of your project? &gt; Why did you undertake it? &gt; You don't have to answer all the questions -- just the ones relevant to your project.   Screenshots   &gt; **[?]** &gt; Please provide your screenshots here.  |                               Home Page                               |                               Login Page                               | | :-------------------------------------------------------------------: | :--------------------------------------------------------------------: | |  |  |"},{"location":"#built-with","title":"Built With","text":"<p>[?] Please provide the technologies that are used in the project.</p>"},{"location":"#getting-started","title":"Getting Started","text":""},{"location":"#prerequisites","title":"Prerequisites","text":"<p>[?] What are the project requirements/dependencies?</p>"},{"location":"#installation","title":"Installation","text":"<p>[?] Describe how to install and get started with the project.</p>"},{"location":"#usage","title":"Usage","text":"<p>[?] How does one go about using it? Provide various use cases and code examples here.</p>"},{"location":"#roadmap","title":"Roadmap","text":"<p>See the open issues for a list of proposed features (and known issues).</p> <ul> <li>Top Feature Requests (Add your votes using the \ud83d\udc4d reaction)</li> <li>Top Bugs (Add your votes using the \ud83d\udc4d reaction)</li> <li>Newest Bugs</li> </ul>"},{"location":"#support","title":"Support","text":"<p>[?] Provide additional ways to contact the project maintainer/maintainers.</p> <p>Reach out to the maintainer at one of the following places:</p> <ul> <li>GitHub Discussions</li> <li>Contact options listed on this GitHub profile</li> <li>Contact options for Titan Byte Data</li> </ul>"},{"location":"#project-assistance","title":"Project assistance","text":"<p>If you want to say thank you or/and support active development of Yggdrasil Catalog:</p> <ul> <li>Add a GitHub Star to the project.</li> <li>Tweet about the Yggdrasil Catalog.</li> <li>Write interesting articles about the project on Dev.to, Medium or your personal blog.</li> </ul> <p>Together, we can make Yggdrasil Catalog better!</p>"},{"location":"#contributing","title":"Contributing","text":"<p>First off, thanks for taking the time to contribute! Contributions are what make the open-source community such an amazing place to learn, inspire, and create. Any contributions you make will benefit everybody else and are greatly appreciated.</p> <p>Please read our contribution guidelines, and thank you for being involved!</p>"},{"location":"#original-author","title":"Original Author","text":"<p>The original setup of this repository is by Titan Byte Data.</p>"},{"location":"#contributors","title":"Contributors","text":"<p>For a full list of all authors and contributors for this repo, see the contributors page.</p>"},{"location":"#security","title":"Security","text":"<p>Yggdrasil Catalog follows good practices of security, but 100% security cannot be assured. Yggdrasil Catalog is provided \"as is\" without any warranty. Use at your own risk.</p> <p>For more information and to report security issues, please refer to our security documentation.</p>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the BSD License.</p> <p>See LICENSE for more information.</p>"},{"location":"#acknowledgements","title":"Acknowledgements","text":"<p>[?] If your work was funded by any organization or institution, acknowledge their support here. In addition, if your work relies on other software libraries, or was inspired by looking at other work, it is appropriate to acknowledge this intellectual debt too. </p>"},{"location":"CODE_OF_CONDUCT/","title":"Contributor Covenant Code of Conduct","text":""},{"location":"CODE_OF_CONDUCT/#our-pledge","title":"Our Pledge","text":"<p>In the interest of fostering an open and welcoming environment, we as contributors and maintainers pledge to make participation in our project and our community a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, religion, or sexual identity and orientation.</p>"},{"location":"CODE_OF_CONDUCT/#our-standards","title":"Our Standards","text":"<p>Examples of behavior that contributes to creating a positive environment include:</p> <ul> <li>Using welcoming and inclusive language</li> <li>Being respectful of differing viewpoints and experiences</li> <li>Gracefully accepting constructive criticism</li> <li>Focusing on what is best for the community</li> <li>Showing empathy towards other community members</li> </ul> <p>Examples of unacceptable behavior by participants include:</p> <ul> <li>The use of sexualized language or imagery and unwelcome sexual attention or advances</li> <li>Trolling, insulting/derogatory comments, and personal or political attacks</li> <li>Public or private harassment</li> <li>Publishing others' private information, such as a physical or electronic address, without explicit permission</li> <li>Other conduct which could reasonably be considered inappropriate in a professional setting</li> </ul>"},{"location":"CODE_OF_CONDUCT/#our-responsibilities","title":"Our Responsibilities","text":"<p>Project maintainers are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior.</p> <p>Project maintainers have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, or to ban temporarily or permanently any contributor for other behaviors that they deem inappropriate, threatening, offensive, or harmful.</p>"},{"location":"CODE_OF_CONDUCT/#scope","title":"Scope","text":"<p>This Code of Conduct applies within all project spaces, and it also applies when an individual is representing the project or its community in public spaces. Examples of representing a project or community include using an official project email address, posting via an official social media account, or acting as an appointed representative at an online or offline event. Representation of a project may be further defined and clarified by project maintainers.</p>"},{"location":"CODE_OF_CONDUCT/#enforcement","title":"Enforcement","text":"<p>Instances of abusive, harassing, or otherwise unacceptable behavior may be reported by contacting the project maintainer using any of the private contact addresses. All complaints will be reviewed and investigated and will result in a response that is deemed necessary and appropriate to the circumstances. The project team is obligated to maintain confidentiality with regard to the reporter of an incident. Further details of specific enforcement policies may be posted separately.</p> <p>Project maintainers who do not follow or enforce the Code of Conduct in good faith may face temporary or permanent repercussions as determined by other members of the project's leadership.</p>"},{"location":"CODE_OF_CONDUCT/#attribution","title":"Attribution","text":"<p>This Code of Conduct is adapted from the Contributor Covenant, version 1.4, available at https://www.contributor-covenant.org/version/1/4/code-of-conduct.html</p> <p>For answers to common questions about this code of conduct, see https://www.contributor-covenant.org/faq</p>"},{"location":"CONTRIBUTING/","title":"Contributing","text":"<p>When contributing to the Yggdrasil Catalog, please submit the change you wish to make via issue, email, or any other method with the owners of this repository before making a change. Please note we have a code of conduct, please follow it in all your interactions with the project.</p>"},{"location":"CONTRIBUTING/#issues-and-feature-requests","title":"Issues and feature requests","text":"<p>You've found a bug in the source code, a mistake in the documentation or maybe you'd like a new feature? Take a look at GitHub Discussions to see if it's already being discussed. You can help us by submitting an issue on GitHub. Before you create an issue, make sure to search the issue archive -- your issue may have already been addressed!</p> <p>Please try to create bug reports that are:</p> <ul> <li>Reproducible. Include steps to reproduce the problem.</li> <li>Specific. Include as much detail as possible: which version, what environment, etc.</li> <li>Unique. Do not duplicate existing opened issues.</li> <li>Scoped to a Single Bug. One bug per report.</li> </ul> <p>Even better: Submit a pull request with a fix or new feature!</p>"},{"location":"SECURITY/","title":"Security Policy","text":""},{"location":"SECURITY/#reporting-a-vulnerability","title":"Reporting a Vulnerability","text":"<p>If there are any vulnerabilities in Yggdrasil Catalog, don't hesitate to report them.</p> <ol> <li>Use any of the private contact addresses.</li> <li>Describe the vulnerability.</li> </ol> <p>If you have a fix, that is most welcome -- please attach or summarize it in your message!</p> <ol> <li>We will evaluate the vulnerability and, if necessary, release a fix or mitigating steps to address it. We will contact you to let you know the outcome, and will credit you in the report.</li> </ol> <p>Please do not disclose the vulnerability publicly until a fix is released!</p> <ol> <li>Once we have either a) published a fix, or b) declined to address the vulnerability for whatever reason, you are free to publicly disclose it.</li> </ol>"},{"location":"flux/apps/airbyte/","title":"Airbyte","text":"<ul> <li>Airbyte</li> <li>Base resources</li> <li>Components</li> <li>Deploying Airbyte</li> <li>Substitution Variables<ul> <li>base</li> <li>airbyte</li> </ul> </li> </ul> <p>This Flux app will deploy Airbyte into Kubernetes clusters.</p>"},{"location":"flux/apps/airbyte/#base-resources","title":"Base resources","text":""},{"location":"flux/apps/airbyte/#components","title":"Components","text":""},{"location":"flux/apps/airbyte/#deploying-airbyte","title":"Deploying Airbyte","text":""},{"location":"flux/apps/airbyte/#substitution-variables","title":"Substitution Variables","text":""},{"location":"flux/apps/airbyte/#base","title":"base","text":""},{"location":"flux/apps/airbyte/#airbyte_1","title":"airbyte","text":""},{"location":"flux/apps/airflow/","title":"Airflow Infrastructure","text":"<ul> <li>Airflow Infrastructure</li> <li>Base resources</li> <li>Components</li> <li>Deploying Airflow</li> <li>Okta Authentication</li> <li>Substitution Variables<ul> <li>base</li> <li>airflow</li> </ul> </li> </ul> <p>This infrastructure component will deploy Airflow into Kubernetes clusters. The structure of this component is described below:</p> <pre><code>airflow\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 charts\n\u2502   \u2514\u2500\u2500 airflow\n\u2502       \u251c\u2500\u2500 &lt;chart-version&gt;\n\u2502       \u2502   \u251c\u2500\u2500 kustomization.yaml\n\u2502       \u2502   \u2514\u2500\u2500 values.yaml.tpl\n\u2502       \u2514\u2500\u2500 sync.yaml.tpl\n\u251c\u2500\u2500 kustomization.yaml\n\u251c\u2500\u2500 namespace.yaml.tpl\n\u2514\u2500\u2500 source.yaml.tpl\n</code></pre>"},{"location":"flux/apps/airflow/#base-resources","title":"Base resources","text":"<p>The base <code>Kustomization</code> creates the following resources:</p> <ol> <li><code>HelmRepository</code> - directs Flux to the Airflow helm repo</li> <li><code>Namespace</code> - creates the namespace for the helm chart to be deployed in</li> </ol>"},{"location":"flux/apps/airflow/#components","title":"Components","text":"<p>Airflow consists of one helm chart. The <code>infrastructure/airflow/charts</code> directory contains the resources required for deploying different versions of the Airflow helm chart. Each version directory contains a <code>values.yaml.tpl</code> which consists of a <code>Secret</code> for storing the helm values.</p> <pre><code># infrastructure/airflow/charts/airflow/&lt;chart-version&gt;/values.yaml.tpl\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: airflow-values\ntype: Opaque\nstringData:\n  values.yaml: |-\n    ...\n</code></pre> <p>It also contains a <code>kustomization.yaml</code> which creates a <code>Component</code> that deploys the <code>Secret</code> in <code>values.yaml.tpl</code> and <code>HelmRelease</code> in the <code>sync.yaml.tpl</code> files. The <code>HelmRelease</code> chart version is patched in the component in order to avoid deploying the wrong chart version with the generated helm values.</p> <pre><code># infrastructure/airflow/charts/airflow/&lt;chart-version&gt;/kustomization.yaml\n---\napiVersion: kustomize.config.k8s.io/v1alpha1\nkind: Component\nmetadata:\n  name: airflow-config\nresources: [values.yaml.tpl, ../sync.yaml.tpl]\ngeneratorOptions:\n  disableNameSuffixHash: true\npatches:\n  - target:\n      kind: HelmRelease\n      name: airflow\n    patch: |-\n      apiVersion: helm.toolkit.fluxcd.io/v2beta1\n      kind: HelmRelease\n      metadata:\n        name: not-used\n      spec:\n        chart:\n          spec:\n            version: 1.15.0\n</code></pre>"},{"location":"flux/apps/airflow/#deploying-airflow","title":"Deploying Airflow","text":"<p>Some secret values are required to be substituted into the airflow helm values secret. This Kubernetes secret should be created before the airflow Kustomization. First create a <code>secrets/airflow</code> directory in the <code>cluster/cml/dev/ue2/&lt;cluster-name&gt;</code> directory. Then create and encrypt secret files for the following secrets:</p> <ol> <li><code>dbPass</code> - the password to the airflow backend postgres database</li> <li><code>webserverSecretKey</code> - the secret key for the airflow web server</li> <li><code>gitSshKey</code> - the ssh deploy key for syncing dags to airflow</li> </ol> <p>Now create a <code>kustomization.yaml</code> with the following configuration, this will trigger flux to create the secret required for variable substitution in the airflow Kustomization:</p> <pre><code>---\napiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\ngeneratorOptions:\n  disableNameSuffixHash: true\nsecretGenerator:\n  - name: airflow-config-secrets\n    namespace: flux-system\n    files:\n      - dbPass=./dbPass\n      - webserverSecretKey=./webserverSecretKey\n  - name: airflow-ssh-secret\n    namespace: airflow\n    files:\n      - gitSshKey=./gitSshKey\n</code></pre> <p>To deploy Airflow, create a Flux <code>Kustomization</code> in the <code>acc-platform</code> repository and use the <code>airflow</code> component with the desired version path.</p> <pre><code>---\napiVersion: kustomize.toolkit.fluxcd.io/v1\nkind: Kustomization\nmetadata:\n  name: airflow\n  namespace: flux-system\nspec:\n  targetNamespace: airflow\n  interval: 5m\n  sourceRef:\n    kind: GitRepository\n    name: catalog\n  serviceAccountName: kustomize-controller\n  path: infrastructure/airflow\n  prune: true\n  decryption:\n    provider: sops\n  wait: true\n  timeout: 5m\n  components:\n    - ./charts/airflow/1.15.0\n  postBuild:\n    substituteFrom:\n      - kind: Secret\n        name: airflow-config-secrets\n    substitute: ...\n</code></pre>"},{"location":"flux/apps/airflow/#okta-authentication","title":"Okta Authentication","text":"<p>If Okta is required for authentication with Airflow, then the <code>airflow-okta-auth</code> component can be added to the airflow Kustomization:</p> <pre><code>---\napiVersion: kustomize.toolkit.fluxcd.io/v1\nkind: Kustomization\nmetadata:\n  name: airflow\n  namespace: flux-system\nspec:\n  targetNamespace: airflow\n  interval: 1m\n  sourceRef:\n    kind: GitRepository\n    name: catalog\n  components:\n    - ../../components/aws/cml/airflow-okta-auth\n  ... # omitted for brevity\n</code></pre> <p>A secret called <code>okta-oauth-secret</code> in the airflow namespace is required for this to work. The following secrets should be included:</p> <ol> <li><code>oktaClientId</code> - the okta client id</li> <li><code>oktaClientSecret</code> - the okta client secret</li> </ol> <p>This secret can be added to the list of secret generators described in Deploying Airflow. Encrypt the <code>oktaClientId</code> and <code>oktaClientSecret</code> in two files in the secrets directory, then add this value to the <code>secretGenerator</code>:</p> <pre><code>---\napiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\ngeneratorOptions:\n  disableNameSuffixHash: true\nsecretGenerator:\n  ...\n  - name: okta-oauth-secret\n    namespace: airflow\n    files:\n      - ./oktaClientId\n      - ./oktaClientSecret\n</code></pre>"},{"location":"flux/apps/airflow/#substitution-variables","title":"Substitution Variables","text":""},{"location":"flux/apps/airflow/#base","title":"base","text":"Variable Required Default Description <code>targetNamespace</code> <code>airflow</code> the namespace to create and deploy Airflow in <code>tenant</code> <code>platform</code> the tenant that this service belongs to"},{"location":"flux/apps/airflow/#airflow","title":"airflow","text":"Variable Required Default Description <code>chartVersion</code> <code>1.15.0</code> the airflow chart version, this is optional and should be patched by the versioned chart component <code>airflowImageRepo</code> <code>apache/airflow</code> the airflow image repository <code>airflowImageTag</code> the chart default the airflow image tag <code>airflowVersion</code> the chart default the airflow version <code>executor</code> <code>CeleryExecutor</code> which airflow executor to use <code>env</code> \u2705 the environment, adds <code>ENVIRONMENT</code> env var to all pods <code>dbUser</code> <code>airflow</code> the database user <code>dbPass</code> \u2705 the password for the database, set this in the <code>airflow-config-secrets</code> <code>dbHost</code> \u2705 the host for the database <code>dbName</code> <code>airflow_db</code> the database name <code>webserverSecretKey</code> \u2705 the webserver secret, set this in the <code>airflow-config-secrets</code> <code>workerRoleArn</code> \u2705 the iam role for the airflow worker service account <code>minWorkerReplicas</code> <code>1</code> the minimum number of workers <code>maxWorkerReplicas</code> <code>5</code> the maximum number of workers <code>workerLimitCpu</code> <code>4</code> the worker cpu limit <code>workerLimitMemory</code> <code>4096Mi</code> the worker memory limit <code>workerRequestCpu</code> <code>2</code> the worker cpu request <code>workerRequestMemory</code> <code>2048Mi</code> the worker memory request <code>schedulerReplicas</code> <code>2</code> the number of scheduler replicas <code>schedulerLimitCpu</code> <code>4</code> the scheduler cpu limit <code>schedulerLimitMemory</code> <code>4096Mi</code> the scheduler memory limit <code>schedulerRequestCpu</code> <code>2</code> the scheduler cpu request <code>schedulerRequestMemory</code> <code>2048Mi</code> the scheduler memory request <code>webserverReplicas</code> <code>1</code> the number of webserver replicas <code>webserverLimitCpu</code> <code>1</code> the webserver cpu limit <code>webserverLimitMemory</code> <code>4096Mi</code> the webserver memory limit <code>webserverRequestCpu</code> <code>500m</code> the webserver cpu request <code>webserverRequestMemory</code> <code>2048Mi</code> the webserver memory request <code>triggererEnabled</code> <code>true</code> whether to enable the triggerer or not <code>triggererReplicas</code> <code>1</code> the number of triggerer replicas <code>triggererLimitCpu</code> <code>2</code> the triggerer cpu limit <code>triggererLimitMemory</code> <code>2048Mi</code> the triggerer memory limit <code>triggererRequestCpu</code> <code>1</code> the triggerer cpu request <code>triggererRequestMemory</code> <code>1024Mi</code> the triggerer memory request <code>dagProcessorEnabled</code> <code>false</code> whether to enable the separate dag processor or not <code>dagProcessorLimitCpu</code> <code>1</code> the dag processor cpu limit <code>dagProcessorLimitMemory</code> <code>1024Mi</code> the dag processor memory limit <code>dagProcessorRequestCpu</code> <code>500m</code> the dag processor cpu request <code>dagProcessorRequestMemory</code> <code>512Mi</code> the dag processor memory request <code>flowerEnabled</code> <code>true</code> whether to enable celery flower or not <code>flowerLimitCpu</code> <code>500m</code> the flower cpu limit <code>flowerLimitMemory</code> <code>512Mi</code> the flower memory limit <code>flowerRequestCpu</code> <code>250m</code> the flower cpu request <code>flowerRequestMemory</code> <code>256Mi</code> the flower memory request <code>statsdEnabled</code> <code>false</code> whether to enable statsd or not <code>statsdLimitCpu</code> <code>500m</code> the statsd cpu limit <code>statsdLimitMemory</code> <code>512Mi</code> the statsd memory limit <code>statsdRequestCpu</code> <code>250m</code> the statsd cpu request <code>statsdRequestMemory</code> <code>256Mi</code> the statsd memory request <code>pgbouncerLimitCpu</code> <code>500m</code> the pgbouncer cpu limit <code>pgbouncerLimitMemory</code> <code>512Mi</code> the pgbouncer memory limit <code>pgbouncerRequestCpu</code> <code>250m</code> the pgbouncer cpu request <code>pgbouncerRequestMemory</code> <code>256Mi</code> the pgbouncer memory request <code>redisLimitCpu</code> <code>500m</code> the redis cpu limit <code>redisLimitMemory</code> <code>512Mi</code> the redis memory limit <code>redisRequestCpu</code> <code>250m</code> the redis cpu request <code>redisRequestMemory</code> <code>256Mi</code> the redis memory request <code>baseDomain</code> \u2705 the base domain for airflow <code>remoteLoggingEnabled</code> <code>false</code> whether to enable remote logging or not <code>s3LogBucketPath</code> <code>\"\"</code> the s3 log bucket path <code>dagRepoName</code> \u2705 the gitlab repository name to sync the dags from <code>dagBranch</code> <code>main</code> the branch/tag to sync from <code>dagRev</code> <code>HEAD</code> the git revision to sync from <code>dagRef</code> <code>main</code> the branch/tag to sync from <code>dagPath</code> <code>dags</code> the subpath in the repository where dags are located <code>gitSyncLimitCpu</code> <code>500m</code> the git sync cpu limit <code>gitSyncLimitMemory</code> <code>512Mi</code> the git sync memory limit <code>gitSyncRequestCpu</code> <code>250m</code> the git sync cpu request <code>gitSyncRequestMemory</code> <code>256Mi</code> the git sync memory request <code>awsACMCertificateArn</code> \u2705 if not using istio the aws acm certificate arn for ssl"},{"location":"flux/apps/cloudnative-pg/","title":"CloudNative PG","text":"<ul> <li>CloudNative PG</li> <li>Base resources</li> <li>Components</li> <li>Deploying Operator</li> <li>Deploying Cluster</li> <li>Substitution Variables<ul> <li>base</li> <li>cloudnative-pg</li> <li>cluster</li> </ul> </li> </ul> <p>This Flux app will deploy the CloudNative PG Operator and Cluster into Kubernetes clusters.</p>"},{"location":"flux/apps/cloudnative-pg/#base-resources","title":"Base resources","text":""},{"location":"flux/apps/cloudnative-pg/#components","title":"Components","text":""},{"location":"flux/apps/cloudnative-pg/#deploying-operator","title":"Deploying Operator","text":""},{"location":"flux/apps/cloudnative-pg/#deploying-cluster","title":"Deploying Cluster","text":""},{"location":"flux/apps/cloudnative-pg/#substitution-variables","title":"Substitution Variables","text":""},{"location":"flux/apps/cloudnative-pg/#base","title":"base","text":""},{"location":"flux/apps/cloudnative-pg/#cloudnative-pg_1","title":"cloudnative-pg","text":""},{"location":"flux/apps/cloudnative-pg/#cluster","title":"cluster","text":""},{"location":"flux/apps/karpenter/","title":"Karpenter","text":"<ul> <li>Karpenter</li> <li>Base resources</li> <li>Components</li> <li>Deploying Karpenter</li> <li>Substitution Variables<ul> <li>base</li> <li>memgraph</li> </ul> </li> </ul> <p>This infrastructure component will deploy Karpenter into Kubernetes clusters. The structure of this component is described below:</p> <pre><code>karpenter\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 charts\n\u2502   \u2514\u2500\u2500 karpenter\n\u2502       \u251c\u2500\u2500 &lt;chart-version&gt;\n\u2502       \u2502   \u251c\u2500\u2500 kustomization.yaml\n\u2502       \u2502   \u2514\u2500\u2500 values.yaml.tpl\n\u2502       \u2514\u2500\u2500 sync.yaml.tpl\n\u251c\u2500\u2500 kustomization.yaml\n\u251c\u2500\u2500 namespace.yaml.tpl\n\u2514\u2500\u2500 source.yaml.tpl\n</code></pre>"},{"location":"flux/apps/karpenter/#base-resources","title":"Base resources","text":"<p>The base <code>Kustomization</code> creates the following resources:</p> <ol> <li><code>HelmRepository</code> - directs Flux to the Karpenter helm repo</li> <li><code>Namespace</code> - creates the namespace for the helm chart to be deployed in</li> </ol>"},{"location":"flux/apps/karpenter/#components","title":"Components","text":"<p>Karpenter consists of one helm chart. The <code>apps/karpenter/charts</code> directory contains the resources required for deploying different versions of the Karpenter helm chart. Each version directory contains a <code>values.yaml.tpl</code> which consists of a <code>ConfigMap</code> for storing the helm values.</p> <pre><code># apps/karpenter/charts/karpenter/&lt;chart-version&gt;/values.yaml.tpl\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: karpenter-config\ntype: Opaque\ndata:\n  values.yaml: |-\n    ...\n</code></pre> <p>It also contains a <code>kustomization.yaml</code> which creates a <code>Component</code> that deploys the <code>ConfigMap</code> in <code>values.yaml.tpl</code> and <code>HelmRelease</code> in the <code>sync.yaml.tpl</code> files. The <code>HelmRelease</code> chart version is patched in the component in order to avoid deploying the wrong chart version with the generated helm values.</p> <pre><code># apps/karpenter/charts/karpenter/&lt;chart-version&gt;/kustomization.yaml\n---\napiVersion: kustomize.config.k8s.io/v1alpha1\nkind: Component\nmetadata:\n  name: karpenter-config\nresources: [values.yaml.tpl, ../sync.yaml.tpl]\ngeneratorOptions:\n  disableNameSuffixHash: true\npatches:\n  - target:\n      kind: HelmRelease\n      name: karpenter\n    patch: |-\n      apiVersion: helm.toolkit.fluxcd.io/v2beta1\n      kind: HelmRelease\n      metadata:\n        name: not-used\n      spec:\n        chart:\n          spec:\n            version: 1.2.1\n</code></pre>"},{"location":"flux/apps/karpenter/#deploying-karpenter","title":"Deploying Karpenter","text":"<p>To deploy Karpenter, create a Flux <code>Kustomization</code> in your GitOps repository and use the <code>karpenter</code> component with the desired version path.</p> <pre><code>---\napiVersion: kustomize.toolkit.fluxcd.io/v1\nkind: Kustomization\nmetadata:\n  name: karpenter\n  namespace: flux-system\nspec:\n  targetNamespace: karpenter\n  interval: 5m\n  sourceRef:\n    kind: GitRepository\n    name: yggdrasil-catalog\n  serviceAccountName: kustomize-controller\n  path: apps/karpenter\n  prune: true\n  wait: true\n  timeout: 5m\n  components: [./charts/karpenter/1.2.1]\n  postBuild:\n    substitute:\n      targetNamespace: karpenter\n      tenant: &lt;tenant&gt; # i.e. titanbytedata\n      ... # omitted for brevity\n</code></pre>"},{"location":"flux/apps/karpenter/#substitution-variables","title":"Substitution Variables","text":""},{"location":"flux/apps/karpenter/#base","title":"base","text":"Variable Required Default Description <code>targetNamespace</code> <code>karpenter</code> the namespace to create and deploy Karpenter in <code>tenant</code> <code>titanbytedata</code> the tenant that this service belongs to"},{"location":"flux/apps/karpenter/#memgraph","title":"memgraph","text":"Variable Required Default Description <code>coreNodeKey</code> <code>core</code> the taint key for core nodes so Karpenter doesn't get deployed to it's own nodes <code>serviceAccountRoleArn</code> the AWS role ARN for the Karpenter pods <code>clusterName</code> the EKS cluster name <code>clusterEndpoint</code> the EKS cluster endpoint <code>interruptionQueue</code> the interruption queue"},{"location":"flux/apps/tailscale/","title":"Tailscale Operator","text":"<ul> <li>Tailscale Operator</li> <li>Base resources</li> <li>Components</li> <li>Deploying Tailscale Operator</li> <li>Substitution Variables<ul> <li>base</li> <li>tailscale-operator</li> </ul> </li> </ul> <p>This Flux app will deploy the Tailscale Operator into Kubernetes clusters.</p>"},{"location":"flux/apps/tailscale/#base-resources","title":"Base resources","text":""},{"location":"flux/apps/tailscale/#components","title":"Components","text":""},{"location":"flux/apps/tailscale/#deploying-tailscale-operator","title":"Deploying Tailscale Operator","text":""},{"location":"flux/apps/tailscale/#substitution-variables","title":"Substitution Variables","text":""},{"location":"flux/apps/tailscale/#base","title":"base","text":""},{"location":"flux/apps/tailscale/#tailscale-operator_1","title":"tailscale-operator","text":""}]}